#!/usr/bin/env bash

# update the advanced package tool (apt)
apt-get update
apt-get upgrade

# install
apt -y install git

git config --global user.email "afrancocedeno@gmail.com"
git config --global user.name "Alejandro Franco CedeÃ±o"

apt -y install pep8
npm install semistandard --global
apt -y install curl
apt -y install python3
apt install -y python3-pip

echo 'deb http://repo.mysql.com/apt/ubuntu/ trusty mysql-5.7-dmr' | sudo tee -a /etc/apt/sources.list
sudo apt-get update
sudo apt-get install mysql-server-5.7
service mysql start

pip3 install virtualenv
# install virtualenv
# # usage: virtualenv ENV_NAME
# cd to ENV_NAME
# # usage: source .consider dir.bin/activate

echo "PS1=\"\W > \"" >> ~/.bashrc

# g command to add, commit and push and chmod .py and .rb files
# usage: g FILE_NAME "COMMIT DESCRIPTION"
echo "#!/bin/bash
# try
if [[ \$1 == *.py ]] || [[ \$1 == *.rb ]] || [[ \$1 == *.js ]] || grep -q "bash" \$1
then
    chmod +x \$1
    if [[ \$1 == *.py ]]; then
        lint=\$(pep8 \$1 | wc -l)
        if [ \$lint -ge "1" ]; then
            pep8 \$1
            exit
        fi
    elif [[ \$1 == *.js ]]
    then
        lint=\$(semistandard \$1 | wc -l)
        if [ \$lint -ge "1" ]
        then
            semistandard \$1
            semistandard --fix
            exit
        fi
    elif [[ \$1 == *.c ]]
    then
        betty_style=\$(betty \$1 | grep ":" | wc -l)
        echo \$betty_style
        if [ \$betty_style -ge "1" ]
        then
            betty \$1
            exit
        fi
    fi
fi
git add \$1
git commit -m \$2
git push" > /usr/bin/g

#---------------------------------- add shellcheck ^^^


# set executable the g command
chmod +x /usr/bin/g

#
# usage: ch FILE_NAME
echo "
#!/usr/bin/bash
chmod u+x \$1
" > /usr/bin/ch

chmod +x /usr/bin/ch

# install betty
git clone https://github.com/holbertonschool/Betty.git
cd Betty
sudo ./install.sh
echo "#!/bin/bash
# Simply a wrapper script to keep you from having to use betty-style
# and betty-doc separately on every item.
# Originally by Tim Britton (@wintermanc3r), multiargument added by
# Larry Madeo (@hillmonkey)

# BIN_PATH="/usr/local/bin"
# BETTY_STYLE="betty-style"
# BETTY_DOC="betty-doc"
#
# if [ "$#" = "0" ]; then
#     echo "No arguments passed."
#     exit 1
# fi

# for argument in "$@" ; do
#     echo -e "\n========== $argument =========="
#     ${BIN_PATH}/${BETTY_STYLE} "$argument"
#     ${BIN_PATH}/${BETTY_DOC} "$argument"
# done" > /bin/betty
# chmod a+x /bin/betty
# cd ..
# rm -rf Betty
